(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))c(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const y of o.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&c(y)}).observe(document,{childList:!0,subtree:!0});function p(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(l){if(l.ep)return;l.ep=!0;const o=p(l);fetch(l.href,o)}})();function H(h){const s=[],p=/"((?:\\.|[^"\\])*)"|'((?:\\.|[^'\\])*)'|\/\*(.|[\r\n])*?\*\/|\/\/[^\r\n]*|\/(\/)?([^\r\n\/])*|([A-Za-z_]\w*)|(-?\d+(\.\d*)?|0x[0-9a-f]+|\.\d+)|./g;return h.replace(p,(c,...l)=>c===" "?(s.push({color:"",value:"&nbsp;"}),""):c==='""'||c==="''"||l[0]||l[1]?(s.push({color:"#699f52",value:c}),""):l[2]||l[3]?(s.push({color:"#787d73",value:c}),""):l[4]?(s.push({color:"#53a7d5",value:c}),""):l[5]?(s.push({color:"#29ab94",value:c}),""):(s.push({color:"auto",value:c}),"")),s}function A(h){const s=document.querySelector(".cursor"),p=document.querySelector(".selection"),c=h.querySelector(".lines"),l=h.querySelector(".code");let o=!1,y=!1;const M=8.88,b=19,e={line1:0,key1:0,line2:0,key2:0};function w(n,t){return c.getBoundingClientRect().width+n*M+.5+"px "+(t*b+1.5)+"px"}function C(n,t){return`<div style="translate: ${w(n,t)}; width: ${(i[t].length-n)*M}px"></div>`}function a(){if(s.style.translate=w(e.key2,e.line2),!k()){p.innerHTML="";return}let n="";if(e.line1===e.line2){const t=Math.min(e.key1,e.key2),r=Math.max(e.key1,e.key2);n=`<div style="translate: ${w(t,e.line1)}; width: ${(r-t)*M}px"></div>`}else{const t=Math.min(e.line1,e.line2),r=Math.max(e.line1,e.line2);let u=t===e.line1?e.key1:e.key2,m=t===e.line2?e.key2:e.key1;n+=C(u,t);for(let f=t+1;f<r;f++)n+=C(0,f);e.line1!==e.line2&&(n+=C(m,r))}p.innerHTML=n}function S(n){o!==n&&n&&(o=n,s.hidden=!o,o||(y=!1),a())}function E(){let n="";for(let t=0;t<i.length;t++)n+=`<div class="lines-line">${t+1}</div>`;c.innerHTML=n}function d(n){const t=l.children[n];let r="";const u=i[n],m=H(u);for(let f=0;f<m.length;f++){const D=m[f];r+=`<span style="color:${D.color}">${D.value}</span>`}t.innerHTML=r}function v(n){if(n===`
`)return g.Enter();if(n==="\b")return g.Backspace();k()&&g.Backspace();const t=i[e.line1];i[e.line1]=t.substring(0,e.key1)+n+t.substring(e.key1),e.key1=++e.key2,d(e.line1),a()}function k(){return e.key1!==e.key2||e.line1!==e.line2}function L(){const n=Math.max(e.key1,e.key2),t=Math.max(e.line1,e.line2);e.key1=e.key2=n,e.line1=e.line2=t,a()}function x(){e.key1<0&&(e.key1=e.key2=0),e.key1>i[e.line1].length&&(e.key1=e.key2=i[e.line1].length),e.line1<0&&(e.line1=e.line2=0),e.line1>i.length-1&&(e.line1=e.line2=i.length-1),a()}c.innerHTML="1",s.hidden=!0;const i=[""];for(let n=0;n<i.length;n++)l.innerHTML+='<div class="line"></div>',E(),d(n),e.line1=++e.line2;addEventListener("blur",()=>S(!1)),addEventListener("mousedown",n=>{S(n.composedPath().includes(l))});const g={Enter(){k()&&g.Backspace();const n=document.createElement("div");n.classList.add("line");const t=l.children[e.line1];t?t.insertAdjacentElement("afterend",n):l.appendChild(n),i.splice(e.line1+1,0,"");const r=i[e.line1];i[e.line1]=r.substring(0,e.key1),i[e.line1+1]=r.substring(e.key1),e.line1=++e.line2,e.key1=0,e.key2=0,d(e.line1-1),d(e.line1),a(),E(),h.scrollTop=h.scrollHeight},Backspace(){if(k()){if(e.line1===e.line2){const u=Math.min(e.key1,e.key2),m=Math.max(e.key1,e.key2),f=i[e.line1];i[e.line1]=f.substring(0,u)+f.substring(m),e.key1=e.key2=u,d(e.line1),a();return}const t=Math.min(e.line1,e.line2),r=Math.max(e.line1,e.line2);i.splice(t+1,r-t-1),[...l.children].slice(t+1,r).forEach(u=>u.remove()),t===e.line1?(i[e.line1]=i[e.line1].substring(0,e.key1),i[e.line2]=i[e.line2].substring(e.key2),e.key2=e.key1,e.line2=e.line1):(i[e.line1]=i[e.line1].substring(e.key1),i[e.line2]=i[e.line2].substring(0,e.key2),e.key1=e.key2,e.line1=e.line2),d(e.line1),e.line1!==e.line2&&d(e.line2),a();return}if(e.key1===0){if(e.line1===0)return;const t=i[e.line1];i.splice(e.line1,1),l.children[e.line1].remove(),e.line1=--e.line2,e.key1=e.key2=i[e.line1].length,i[e.line1]+=t,d(e.line1),E(),a();return}const n=i[e.line1];i[e.line1]=i[e.line2]=n.substring(0,e.key1-1)+n.substring(e.key1),d(e.line1),e.key1=--e.key2,a()},ArrowRight(n){if(n.preventDefault(),k())return L();e.key1=++e.key2,e.key1>i[e.line1].length&&e.line1<i.length-1&&(e.line1=++e.line2,e.key1=e.key2=0),x()},ArrowLeft(n){if(n.preventDefault(),k())return L();e.key1=--e.key2,e.key1<0&&e.line1>0&&(e.line1=--e.line2,e.key1=e.key2=1/0),x()},ArrowUp(n){if(n.preventDefault(),k())return L();e.line1=--e.line2,x()},ArrowDown(n){if(n.preventDefault(),k())return L();e.line1>=i.length-1||(e.line1=++e.line2,x())},Tab(n){n.preventDefault(),v(" "),v(" "),v(" "),v(" ")}},T=["Alt","Shift","Control"];addEventListener("keydown",n=>{if(o&&!T.includes(n.key)){if(n.key in g)return g[n.key](n);if(n.key.length!==1)return console.log(n.key);v(n.key)}}),l.addEventListener("mousedown",n=>{y=!0;const t=l.getBoundingClientRect(),r=Math.max(0,Math.min(i.length-1,Math.floor((n.clientY-t.y)/b))),u=Math.max(0,Math.min(i[r].length,Math.round((n.clientX-t.x)/M)));e.line1=r,e.line2=r,e.key1=u,e.key2=u,a()}),addEventListener("mousemove",n=>{if(!y)return;const t=l.getBoundingClientRect(),r=Math.max(0,Math.min(i.length-1,Math.floor((n.clientY-t.y)/b))),u=Math.max(0,Math.min(i[r].length,Math.round((n.clientX-t.x)/M)));e.line2=r,e.key2=u,a()}),addEventListener("mouseup",()=>{y&&(y=!1)})}A(document.querySelector(".editor"));
